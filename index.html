<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>thatnn Status</title>
  <style>
    /* Modern design with fade effects */
    body {
      background-image: url('https://gifsec.com/wp-content/uploads/2023/01/cars-gif-1.gif');
      background-size: cover;
      background-position: center;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-family: 'Arial', sans-serif;
      color: white;
      text-align: center;
      overflow: hidden;
      position: relative;
    }

    /* Semi-transparent text */
    .content {
      background-color: rgba(0, 0, 0, 0.5);
      padding: 20px;
      border-radius: 10px;
      backdrop-filter: blur(10px);
      transition: opacity 0.5s ease;
    }

    h1 {
      font-size: 3rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      margin: 0;
    }

    p {
      font-size: 1.5rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      margin: 10px 0 0;
    }

    /* Rain effect */
    .rain {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background: url('https://i.imgur.com/7QZQZQZ.png') repeat;
      animation: rain 0.5s linear infinite;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    @keyframes rain {
      0% { background-position: 0 0; }
      100% { background-position: 100% 100%; }
    }

    /* 3D gun animation */
    .gun {
      position: absolute;
      bottom: 10%;
      right: 10%;
      width: 200px;
      height: 200px;
      background: url('https://i.imgur.com/3Dgun.gif') no-repeat center/contain;
      opacity: 0;
      transition: opacity 0.5s ease;
    }

    /* Audio controls */
    .audio-controls {
      position: absolute;
      bottom: 20px;
      left: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Toggle effects */
    .toggle-effects {
      position: absolute;
      bottom: 20px;
      right: 20px;
    }
  </style>
</head>
<body>
  <div class="content">
    <h1>thatnn</h1>
    <p id="status">Checking status...</p>
    <p id="quote">"If you don't win the start, win the end" - Yug</p>
  </div>

  <!-- Rain effect -->
  <div class="rain" id="rain"></div>

  <!-- 3D gun animation -->
  <div class="gun" id="gun"></div>

  <!-- Audio controls -->
  <div class="audio-controls">
    <audio id="audio" controls loop>
      <source src="https://docs.google.com/uc?export=download&id=1NFdNZky6WzK1kZHGpCd_64VngF4QryBg" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
    <input type="range" id="volume" min="0" max="1" step="0.1" value="0.5">
  </div>

  <!-- Toggle effects -->
  <div class="toggle-effects">
    <label>
      <input type="checkbox" id="toggleEffects" checked> Enable Effects
    </label>
  </div>

  <script>
    // Your Discord user ID
    const discordUserId = '1274433661181104208';

    // Connect to Lanyard's WebSocket for real-time updates
    const socket = new WebSocket('wss://api.lanyard.rest/socket');

    // DOM elements
    const statusElement = document.getElementById('status');
    const rainElement = document.getElementById('rain');
    const gunElement = document.getElementById('gun');
    const audioElement = document.getElementById('audio');
    const volumeControl = document.getElementById('volume');
    const toggleEffects = document.getElementById('toggleEffects');

    // Set audio volume
    volumeControl.addEventListener('input', () => {
      audioElement.volume = volumeControl.value;
    });

    // Toggle effects
    toggleEffects.addEventListener('change', () => {
      if (!toggleEffects.checked) {
        rainElement.style.opacity = 0;
        gunElement.style.opacity = 0;
      }
    });

    // Function to check for keywords
    function checkKeywords(text) {
      if (toggleEffects.checked) {
        // Rain effect
        if (text.toLowerCase().includes('rain')) {
          rainElement.style.opacity = 1;
          setTimeout(() => { rainElement.style.opacity = 0; }, 2000); // Rain lasts 2 seconds
        }

        // Gun effect (triggered by "gun", "graham graham boom", etc.)
        const gunPhrases = ['gun', 'graham graham boom', 'boom', 'pew pew']; // Add more phrases here
        if (gunPhrases.some(phrase => text.toLowerCase().includes(phrase))) {
          gunElement.style.opacity = 1;
          setTimeout(() => { gunElement.style.opacity = 0; }, 2000); // Gun lasts 2 seconds
        }
      }
    }

    // WebSocket event listeners
    socket.addEventListener('open', () => {
      socket.send(JSON.stringify({
        op: 2,
        d: {
          subscribe_to_id: discordUserId
        }
      }));
    });

    socket.addEventListener('message', (event) => {
      const data = JSON.parse(event.data);

      if (data.t === 'INIT_STATE' || data.t === 'PRESENCE_UPDATE') {
        const status = data.d.discord_status;
        statusElement.textContent = `Status: ${status}`;
        checkKeywords(status); // Check for keywords in status
      }
    });

    socket.addEventListener('error', (error) => {
      console.error('WebSocket error:', error);
      statusElement.textContent = 'Status: Error';
    });

    socket.addEventListener('close', () => {
      console.warn('WebSocket connection closed');
      statusElement.textContent = 'Status: Disconnected';
    });
  </script>
</body>
</html>
